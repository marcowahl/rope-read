<!DOCTYPE html>

<!-- Copyright (C) 2018 Marco Wahl github.com/marcowahl -->

<!-- This program is free software: you can redistribute it and/or modify -->
<!-- it under the terms of the GNU General Public License as published by -->
<!-- the Free Software Foundation, either version 3 of the License, or -->
<!-- (at your option) any later version. -->

<!-- This program is distributed in the hope that it will be useful, -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the -->
<!-- GNU General Public License for more details. -->

<!-- You should have received a copy of the GNU General Public License -->
<!-- along with this program.  If not, see <http://www.gnu.org/licenses/>. -->

<html lang="en">
  <head>
    <title>rope read</title>
  </head>
  <body ondrop="drop_handler(event)" ondragover="dragover_handler(event)" >
    <div id="drop-zone" >
      Drag and drop text below and start rope read!  Or paste text here:
      <textarea id="input"></textarea>
    </div>
    <div id="link-to-dig">
    See details at <a href="https://github.com/marcowahl/rope-read">github.com/marcowahl/rope-read</a>
    </div>
    <div id="output" class="rope-read-section" data-lining></div>
  </body>
  <style type="text/css">

    .rope-read-section .line:nth-of-type(2n) {
    -moz-transform:rotate(180deg);
    }

    body {
    margin:0;
    padding:0;
    }

    body, html {
    height:100%;
    }

    #rope-read-input {
    width: 100%;
    height: 100%;
    }

    #input-area {
    width: 100%;
    height: 100%;
    }

    #input {
    background-color: yellow;
    width:10%;
    }

    #menu {
    width: 100%;
    padding: 1em;
    background-color: beige;
    }

    #drop-zone {
        background-color: cyan;
    }

    #link-to-dig {
    background-color: orange;
    }

  </style>
  <script src="lining.min.js"></script>
  <script>
    (function () {
        var slurpText = () => {
            var output_element = document.getElementById("output")
            output_element.textContent = document.getElementById(
              "input").value.replace(new RegExp("\n\n", 'g'), " ______________ ")
            lining(output_element)
        }
        document.getElementById("input").value = "" // clean start.
        document.getElementById("input").oninput = slurpText
    })()

    function dragover_handler(ev) {
        ev.preventDefault();
        // Set the dropEffect to move
        ev.dataTransfer.dropEffect = "move"
    }

    function drop_handler(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        var output_element = document.getElementById("output")
        output_element.textContent = data
        .replace(new RegExp("\n\n", 'g'), " ______________ ")
        lining(output_element)
    }
  </script>
</html>
